// Render Form
$('#campaign-post-container').hide().after("<%= escape_javascript(render(partial: 'posts/new', locals: { campaign: @campaign, topic: @topic, post: @post })) %>");
$('.share-button-container').hide().after("<%= escape_javascript(render(partial: 'campaigns/back_link')) %>");

$(".back-campaign-link").on('click', function(e) {

  // Remove form and show campaign
  $('#campaign-post-container').show();
  $('#new-post-form').remove();

  // Remove back link and show share button
  $('.back-campaign-container').remove();
  $('.share-button-container').show();

  // Run animations and prevent default button
  runAnimations('#campaign-post-container', '', 'fadeInUp');
  e.preventDefault();

});

// Run New Post Form Animation
runAnimations('#new-post-form', '', 'fadeInLeft');

var initImageSelection = function() {
  // Form Image Selection
  $('.selectable-image').click(function (e) {
    e.preventDefault();
    var image = $(this);
    var radioId = image.attr('id') + '-radio';
    var radio = $('#' + radioId);

    $('.selectable-image').css('border', 'none');
    image.css('border', '3px solid blue');

    $('.default-image-radio').prop('checked', false);
    radio.prop('checked', true);
  }); 
}

// Form Image Selection
initImageSelection();

// Trigger Profile Image Modal Form
$('.trigger-user-image-upload').on('click', function(e) {
  e.preventDefault();
});

$('#user-share-image-modal').modal('attach events', '.trigger-user-image-upload', 'show');
